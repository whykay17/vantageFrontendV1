<div class="container">
    <div class="row">
        <div class="col-lg-4">
            <div class="overview card glass">
                <img class="profile" src={{dashboardData?.profileUrl}} alt="Youtube Channel Display Picture">
                <div class="flex-column pt1">
                    <h5 class="profileName flex-center">{{dashboardData?.channelName}}</h5>
                    <p class="subsCount">Subscribers: {{dashboardData?.subscriberCount}}</p>
                    <a href={{dashboardData?.channelUrl}} target="_blank" rel="noopener noreferrer" pButton class="extButton">
                        Go to Channel
                    </a>
                </div>
            </div>
        </div>
        <div class="col-lg-8">
            <div class="card glass">
                <div class="period">
                    <div class="periodHead">
                        <h5 class="cardTitle">Performance</h5>
                        <div>
                            <p-dropdown
                                [options]="rangeData"
                                [(ngModel)]="periodRange"
                                optionLabel="name"
                                optionValue="value"
                                placeholder="Select Range"
                                styleClass="w-full md:w-14rem"
                                (onChange)="getPeriodAPI(periodRange)"
                                ></p-dropdown>
                        </div>
                    </div>

                    <div class="container">
                        <div class="row fw-bold border-bottom py-2">
                            <div class="col-6">Metric</div>
                            <div class="col-md-4 col-3">Current</div>
                            <div class="col-md-2 col-3">Change</div>
                        </div>

                        <div class="row py-2 border-bottom">
                            <div class="col-6">Subscriber Gained</div>
                            <div class="col-md-4 col-3">{{ periodData?.current.subscribersGained }}</div>
                            <div class="col-md-2 col-3"
                                [ngClass]="getChangeClass(getChange(periodData?.current.subscribersGained, periodData?.previous.subscribersGained))">
                                {{ getChange(periodData?.current.subscribersGained,
                                periodData?.previous.subscribersGained) | number:'1.0-1' }}%
                            </div>
                        </div>

                        <div class="row py-2 border-bottom">
                            <div class="col-6">Views</div>
                            <div class="col-md-4 col-3">{{ periodData?.current.views }}</div>
                            <div class="col-md-2 col-3"
                                [ngClass]="getChangeClass(getChange(periodData?.current.views, periodData?.previous.views))">
                                {{ getChange(periodData?.current.views, periodData?.previous.views) | number:'1.0-1' }}%
                            </div>
                        </div>

                        <div class="row py-2 border-bottom">
                            <div class="col-6">Likes</div>
                            <div class="col-md-4 col-3">{{ periodData?.current.likes }}</div>
                            <div class="col-md-2 col-3"
                                [ngClass]="getChangeClass(getChange(periodData?.current.likes, periodData?.previous.likes))">
                                {{ getChange(periodData?.current.likes, periodData?.previous.likes) | number:'1.0-1' }}%
                            </div>
                        </div>

                        <div class="row py-2 border-bottom">
                            <div class="col-6">Comments</div>
                            <div class="col-md-4 col-3">{{ periodData?.current.comments }}</div>
                            <div class="col-md-2 col-3"
                                [ngClass]="getChangeClass(getChange(periodData?.current.comments, periodData?.previous.comments))">
                                {{ getChange(periodData?.current.comments, periodData?.previous.comments) |
                                number:'1.0-1' }}%
                            </div>
                        </div>

                        <div class="row py-2 border-bottom">
                            <div class="col-6">Watchtime (hours)</div>
                            <div class="col-md-4 col-3">{{ periodData?.current.estimatedMinutesWatched / 60 | number:'1.2-2' }}
                            </div>
                            <div class="col-md-2 col-3"
                                [ngClass]="getChangeClass(getChange(periodData?.current.estimatedMinutesWatched, periodData?.previous.estimatedMinutesWatched))">
                                {{ getChange(periodData?.current.estimatedMinutesWatched,
                                periodData?.previous.estimatedMinutesWatched) | number:'1.0-1' }}%
                            </div>
                        </div>

                        <div class="row py-2 border-bottom">
                            <div class="col-6">Avg. Watch %</div>
                            <div class="col-md-4 col-3">{{ periodData?.current.averageViewPercentage | number:'1.1-2' }}</div>
                            <div class="col-md-2 col-3"
                                [ngClass]="getChangeClass(getChange(periodData?.current.averageViewPercentage, periodData?.previous.averageViewPercentage))">
                                {{ getChange(periodData?.current.averageViewPercentage,
                                periodData?.previous.averageViewPercentage) | number:'1.0-1' }}%
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-8">
            <div class="card glass">
                <div class="latestVideo">
                    <h5 class="cardTitle p1">Latest Video</h5>
                    <div class="video-header">
                      <img [src]="latestVideoData.thumbnail" alt="Video Thumbnail" class="video-thumbnail" />
                      <div class="video-info">
                        <h3 class="video-title">{{ latestVideoData.title }}</h3>
                        <p class="video-date">Published on {{ latestVideoData.publishedAt | date: 'mediumDate' }}</p>
                        <a href={{latestVideoData.url}} target="_blank" rel="noopener noreferrer" pButton class="extButton">
                            Watch on Youtube
                        </a>
                      </div>
                    </div>
                  
                    <div class="video-stats">
                      <div class="stat-item">
                        <span class="stat-label">Views</span>
                        <span class="stat-value">{{ latestVideoData.views | number }}</span>
                      </div>
                      <div class="stat-item">
                        <span class="stat-label">Watch Time (mins)</span>
                        <span class="stat-value">{{ latestVideoData.estimatedMinutesWatched | number: '1.0-0' }}</span>
                      </div>
                      <div class="stat-item">
                        <span class="stat-label">Avg. View Duration</span>
                        <span class="stat-value">{{ latestVideoData.averageViewDuration}}</span>
                      </div>
                      <div class="stat-item">
                        <span class="stat-label">Avg. View %</span>
                        <span class="stat-value">{{ latestVideoData.averageViewPercentage | number:'1.0-1' }}%</span>
                      </div>
                      <div class="stat-item">
                        <span class="stat-label">Subscribers Gained</span>
                        <span class="stat-value">{{ latestVideoData.subscribersGained | number }}</span>
                      </div>
                      <div class="stat-item">
                        <span class="stat-label">Shares</span>
                        <span class="stat-value">{{ latestVideoData.shares | number }}</span>
                      </div>
                    </div>
                </div>
            </div>       
        </div>
        <div class="col-lg-4">
            <div class="card glass">
                <div class="card-body">
                    <h5 class="card-title">Best Performing Video (30 Days)</h5>
                    <p class="card-text">Some quick example text to build on the card title and make up the bulk of the
                        card's content.</p>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-4">
            <div class="card glass">
                <div class="card-body">
                    <h5 class="card-title">Engagement Insights</h5>
                    <p class="card-text">Some quick example text to build on the card title and make up the bulk of the
                        card's content.</p>
                </div>
            </div>
        </div>
        <div class="col-lg-8">
            <div class="card glass">
                <div class="card-body">
                    <h5 class="card-title">Subscriber Growth Trend</h5>
                    <p class="card-text">Some quick example text to build on the card title and make up the bulk of the
                        card's content.</p>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-8">
            <div class="card glass">
                <div class="card-body">
                    <h5 class="card-title">Audience Insights</h5>
                    <p class="card-text">Some quick example text to build on the card title and make up the bulk of the
                        card's content.</p>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="card glass">
                <div class="card-body">
                    <h5 class="card-title">Traffic Sources</h5>
                    <p class="card-text">Some quick example text to build on the card title and make up the bulk of the
                        card's content.</p>
                </div>
            </div>
        </div>
    </div>
</div>